"use strict";var e=require("clsx"),t=require("react"),l=require("react-dom");function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=n(e),o=n(t),a=n(l),c=function(){return c=Object.assign||function(e){for(var t,l=1,n=arguments.length;l<n;l++)for(var r in t=arguments[l])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},c.apply(this,arguments)};var i=function(e){var l=e.className,n=e.tag,i=e.zoomLevel,u=e.fontAwesome,s=e.children,f=e.lightboxRef;e.onOpen;var d=e.onClose,m=e.onSlide,g=e.onZoomIn,h=e.onZoomOut,b=function(e,t){var l={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(l[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(l[n[r]]=e[n[r]])}return l}(e,["className","tag","zoomLevel","fontAwesome","children","lightboxRef","onOpen","onClose","onSlide","onZoomIn","onZoomOut"]),y=r.default("lightbox",l),v=t.useRef(null),p=t.useRef(null),x=t.useRef(null),w=t.useRef(null),E=t.useRef(null),N=t.useRef(null),k=f||N,A=t.useState(!1),S=A[0],L=A[1],O=t.useState(0),q=O[0],F=O[1],R=t.useState(!1),C=R[0],j=R[1],z=t.useState([]),P=z[0],H=z[1],M=t.useState(1),D=M[0],I=M[1],T=t.useState(!1),W=T[0],X=T[1],Y=t.useState(""),Z=Y[0],U=Y[1],V=t.useRef(),B=t.useRef(),G=t.useRef(),J=t.useRef(),K=t.useRef(),Q=t.useRef(),$=function(e,t){var l=e;return l>t.length-1&&(l=0),t[l].classList.contains("lightbox-disabled")?$(l+1,t):l},_=function(e,t){var l=e;return l<0&&(l=t.length-1),t[l].classList.contains("lightbox-disabled")?_(l-1,t):l},ee=t.useCallback((function(e){if(S)switch(e.preventDefault(),e.key){case"ArrowLeft":p.current&&p.current.click();break;case"ArrowRight":x.current&&x.current.click();break;case"ArrowUp":case"ArrowDown":E.current&&E.current.click();break;case"Escape":w.current&&w.current.click();break;case"Home":F(0);break;case"End":P.length>0&&F(P.length-1)}}),[S,P]),te=t.useCallback((function(e,t){var l;document.body.classList.add("overflow-hidden"),L(!0),F(t),document.querySelectorAll(".lightbox-gallery-item").forEach((function(e){ie(e)}));var n=null===(l=v.current)||void 0===l?void 0:l.querySelector(".lightbox-gallery-item.active");U(null==n?void 0:n.getAttribute("alt"))}),[]),le=function(){var e=$(q+1,P);F(e),I(1),X(!1),document.querySelectorAll(".lightbox-gallery-item").forEach((function(e){ie(e)})),setTimeout((function(){var e,t=null===(e=v.current)||void 0===e?void 0:e.querySelector(".lightbox-gallery-item.active");U(null==t?void 0:t.getAttribute("alt"))}),10),null==m||m()},ne=function(){var e=_(q-1,P);F(e),I(1),X(!1),document.querySelectorAll(".lightbox-gallery-item").forEach((function(e){ie(e)})),setTimeout((function(){var e,t=null===(e=v.current)||void 0===e?void 0:e.querySelector(".lightbox-gallery-item.active");U(null==t?void 0:t.getAttribute("alt"))}),10),null==m||m()},re=t.useCallback((function(){void 0===(document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement)&&j(!1)}),[]),oe=function(e){e.preventDefault();var t=e.touches,l=e.target,n=t?t[0].clientX:e.clientX,r=t?t[0].clientY:e.clientY;G.current=parseFloat(l.style.left)||0,J.current=parseFloat(l.style.top)||0,V.current=parseFloat(l.style.left)||0,B.current=parseFloat(l.style.top)||0,K.current=n*(1/D)-V.current,Q.current=r*(1/D)-B.current,X(!0)},ae=function(e){if(W){var t=e.touches,l=t?t[0].clientX:e.clientX,n=t?t[0].clientY:e.clientY;if(1!==D)V.current=l*(1/D)-K.current,B.current=n*(1/D)-Q.current,e.target.style.left="".concat(V.current,"px"),e.target.style.top="".concat(B.current,"px");else{if(P.length<=1)return;V.current=l*(1/D)-K.current,e.target.style.left="".concat(V.current,"px")}}},ce=function(){1===D&&(V.current>0?ne():V.current<0&&le()),X(!1)},ie=function(e){e.width>=e.height?(e.style.width="100%",e.style.maxWidth="100%",e.style.height="auto",e.style.top="".concat((e.parentNode.offsetHeight-e.height)/2,"px"),e.style.left=0):(e.style.height="100%",e.style.maxHeight="100%",e.style.width="auto",e.style.left="".concat((e.parentNode.offsetWidth-e.width)/2,"px"),e.style.top=0),e.width>=e.parentNode.offsetWidth&&(e.style.width="".concat(e.parentNode.offsetWidth,"px"),e.style.height="auto",e.style.left=0,e.style.top="".concat((e.parentNode.offsetHeight-e.height)/2,"px")),e.height>=e.parentNode.offsetHeight&&(e.style.height="".concat(e.parentNode.offsetHeight,"px"),e.style.width="auto",e.style.top=0,e.style.left="".concat((e.parentNode.offsetWidth-e.width)/2,"px")),V.current=parseFloat(e.style.left)||0,B.current=parseFloat(e.style.top)||0},ue=t.useCallback((function(){var e=k.current.querySelectorAll(".lightbox-item");H(e)}),[k]),se=t.useCallback((function(e){for(var t=0,l=e;t<l.length;t++){"childList"===l[t].type&&ue()}}),[ue]);t.useEffect((function(){ue()}),[ue]),t.useEffect((function(){P.length>0&&document.querySelectorAll(".lightbox-gallery-item").forEach((function(e){ie(e)}))}),[P]);var fe=t.useCallback((function(){document.querySelectorAll(".lightbox-gallery-item").forEach((function(e){ie(e)}))}),[]);return t.useEffect((function(){window.addEventListener("resize",fe),window.addEventListener("keydown",(function(e){return ee(e)})),window.addEventListener("fullscreenchange",re);var e=new MutationObserver(se);return e.observe(k.current,{childList:!0,subtree:!0}),P.forEach((function(e,t){!e.classList.contains("lightbox-disabled")&&e.addEventListener("click",(function(e){return te(e,t)}))})),function(){e.disconnect(),window.removeEventListener("resize",fe),window.removeEventListener("keydown",(function(e){return ee(e)})),window.removeEventListener("fullscreenchange",re),P.forEach((function(e,t){e.removeEventListener("click",(function(e){return te(e,t)}))}))}}),[P,k,se,te,fe,ee,re]),o.default.createElement(o.default.Fragment,null,o.default.createElement(n,c({ref:k,className:y},b),s),a.default.createPortal(o.default.createElement("div",{className:"lightbox-gallery",onClick:function(e){"DIV"===e.target.tagName&&(document.body.classList.remove("overflow-hidden"),L(!1),null==d||d())},ref:v,style:{opacity:S?1:0,pointerEvents:S?"initial":"none",visibility:S?"visible":"hidden"}},o.default.createElement("div",{className:"lightbox-gallery-loader"}),o.default.createElement("div",{className:"lightbox-gallery-toolbar"},o.default.createElement("div",{className:"lightbox-gallery-left-tools"},o.default.createElement("p",{className:"lightbox-gallery-counter"},"".concat(q+1," / ").concat(P.length))),o.default.createElement("div",{className:"lightbox-gallery-right-tools"},o.default.createElement("button",{className:"lightbox-gallery-fullscreen-btn ".concat("pro"===u&&"fontawesome-pro"," ").concat(C&&"active"),onClick:function(){var e;C?(document.exitFullscreen&&document.exitFullscreen(),j(!1)):((null===(e=v.current)||void 0===e?void 0:e.requestFullscreen)&&v.current.requestFullscreen(),j(!0))}}),o.default.createElement("button",{ref:E,className:"lightbox-gallery-zoom-btn ".concat("pro"===u&&"fontawesome-pro"," ").concat(D>1&&"active"),onClick:function(){return D>1?(I(D-i),document.querySelectorAll(".lightbox-gallery-item").forEach((function(e){ie(e)})),void(null==h||h())):function(e){I(D+e),null==g||g()}(i)}}),o.default.createElement("button",{className:"lightbox-gallery-close-btn ".concat("pro"===u&&"fontawesome-pro"),onClick:function(){C&&document.exitFullscreen&&document.exitFullscreen(),document.body.classList.remove("overflow-hidden"),L(!1),I(1),X(!1),document.querySelectorAll(".lightbox-gallery-item").forEach((function(e){ie(e)})),null==d||d()},ref:w}))),o.default.createElement("div",{className:"lightbox-gallery-content"},Object.values(P).map((function(e,t){var l,n,r={source:(l=e).getAttribute("data-mdb-img")?l.getAttribute("data-mdb-img"):l.getAttribute("src")?l.getAttribute("src"):"",caption:l.getAttribute("data-mdb-caption")?l.getAttribute("data-mdb-caption"):l.getAttribute("alt")?l.getAttribute("alt"):""},a=r.source,c=r.caption,i=t===q?1:0,u=t===q?D:.25,s=q===P.length-1&&0===t,f=0===q&&t===P.length-1;return n=q<t&&!f&&!s?"100%":q>t&&!f&&!s||f?"-100%":s?"100%":"0%",o.default.createElement("div",{className:"lightbox-gallery-image",key:t,style:{position:"absolute",opacity:i,left:n,transform:"scale(".concat(u,")")}},o.default.createElement("img",{src:a,alt:c,onMouseDown:function(e){return oe(e)},onMouseMove:function(e){return ae(e)},onMouseUp:ce,onTouchStart:function(e){return oe(e)},onTouchMove:function(e){return ae(e)},onTouchEnd:ce,className:"lightbox-gallery-item ".concat(q===t&&"active")}))}))),o.default.createElement("div",{className:"lightbox-gallery-arrow-left"},o.default.createElement("button",{"aria-label":"Previous",className:"".concat("pro"===u?"fontawesome-pro":""),onClick:ne,ref:p})),o.default.createElement("div",{className:"lightbox-gallery-arrow-right"},o.default.createElement("button",{"aria-label":"Next",className:"".concat("pro"===u?"fontawesome-pro":""),onClick:le,ref:x})),o.default.createElement("div",{className:"lightbox-gallery-caption-wrapper"},o.default.createElement("p",{className:"lightbox-gallery-caption"},Z))),document.body))};i.defaultProps={tag:"div",zoomLevel:1,fontAwesome:"free"},module.exports=i;
