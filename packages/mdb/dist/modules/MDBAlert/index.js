"use strict";var t=require("react"),e=require("react-dom"),n=require("clsx");function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var o=r(t),a=r(e),l=r(n),c=function(){return c=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},c.apply(this,arguments)};var s=function(e){var n=e.className,r=e.alertRef,s=e.position,i=e.delay,u=e.autohide,f=e.width,d=e.containerRef,p=e.offset,v=e.appendToBody,h=e.color,m=e.children,y=e.triggerRef,g=e.show,b=e.stacking,w=e.onClose,E=e.onClosed,O=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}(e,["className","alertRef","position","delay","autohide","width","containerRef","offset","appendToBody","color","children","triggerRef","show","stacking","onClose","onClosed"]),k=t.useState(g),x=k[0],T=k[1],S=t.useState(g),j=S[0],R=S[1],L=t.useState({}),P=L[0],C=L[1],q=t.useState(x?"block":"none"),N=q[0],A=q[1],B=t.useState(0),H=B[0],I=B[1],F=t.useRef(null),z=r||F,D=l.default("alert","fade",s&&!d&&"alert-fixed",s&&"alert-".concat(s),d&&"alert-absolute",h?"alert-".concat(h):"alert-primary",x&&j&&"show",b&&"stacking-alert",n);t.useEffect((function(){x&&A("block"),x||j||A("none")}),[x,j,z]),t.useEffect((function(){var t,e;if(s){var n=s.split("-")[0],r=s.split("-")[1],o="top"===n?"bottom":"top",a="left"===r?"right":"left";C("center"===r?((t={})[n]="".concat(void 0!==p?p+H:H,"px"),t.left="50%",t[o]="unset",t.transform="translate(-50%)",t):((e={})[n]="".concat(void 0!==p?p+H:H,"px"),e[r]="".concat(p,"px"),e[o]="unset",e[a]="unset",e.transform="unset",e))}}),[p,s,H]);var G=t.useCallback((function(){T(!0)}),[]);t.useEffect((function(){T(g)}),[g]),t.useEffect((function(){if(b&&x){var t=document.querySelectorAll(".alert-".concat(s)),e=0,n=d?"alert-absolute":"alert-fixed",r=Array.from(t).filter((function(t){return t.classList.contains("show")&&t!==z.current&&t.classList.contains(n)&&t.classList.contains("stacking-alert")}));if(r.length>0){var o=void 0;o="top"===(null==s?void 0:s.split("-")[0])?r[r.length-1].offsetTop+r[r.length-1].offsetHeight:parseInt(r[r.length-1].style.bottom)+r[r.length-1].offsetHeight,e=p?o+p:o}I(e)}}),[b,x,z,H,p,s,d]),t.useEffect((function(){if(null!=y){var t=y.current;return y.current.addEventListener("click",G),function(){t.removeEventListener("click",G)}}}),[y,G]),t.useEffect((function(){null!=d&&d.current.classList.add("parent-alert-relative")}),[d]),t.useEffect((function(){var t;return u&&x&&(t=setTimeout((function(){T(!1)}),i)),function(){clearTimeout(t)}}),[u,x,i]),t.useEffect((function(){var t,e;return x?t=setTimeout((function(){R(!0)}),100):x||(j&&(null==w||w()),e=setTimeout((function(){j&&(null==E||E()),R(!1)}),100)),function(){clearTimeout(t),clearTimeout(e)}}),[x,u,E,w,j]);var J=o.default.createElement("div",c({className:D,ref:z,style:c(c({},P),{width:"unset"===f?f:"".concat(f,"px"),display:N})},O),m);return x||j?v?a.default.createPortal(J,document.body):J:o.default.createElement(o.default.Fragment,null)};s.defaultProps={offset:10,width:"unset",delay:1e3,show:!1,stacking:!1},module.exports=s;
