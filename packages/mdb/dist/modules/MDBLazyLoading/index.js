"use strict";var e=require("react"),t=require("clsx");function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=r(e),a=r(t),o=function(){return o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},o.apply(this,arguments)};var l=function(t){var r=t.animation,l=t.className,i=t.containerRef,c=t.lazyRef,s=t.lazyOffset,u=t.lazySrc,f=t.lazyError,y=t.lazyDelay,d=t.lazyPlaceholder,v=t.video,m=t.onLoad,p=t.onError,z=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(t,["animation","className","containerRef","lazyRef","lazyOffset","lazySrc","lazyError","lazyDelay","lazyPlaceholder","video","onLoad","onError"]),O=e.useRef(null),g=c||O,w=e.useState(d||"..."),E=w[0],b=w[1],h=e.useState(!1),L=h[0],j=h[1],P=e.useState(!1),R=P[0],S=P[1],x=a.default("none"!==r&&L&&"animation ".concat(r),l),C=e.useCallback((function(){var e=g.current.getBoundingClientRect();if(i){var t=i.current.getBoundingClientRect();t.y>0&&t.y<window.innerHeight&&e.y>=t.y&&e.y<=t.y+t.height&&e.y<=window.innerHeight&&(S(!0),m&&m())}e.top+s<=window.innerHeight&&e.bottom>=0&&(S(!0),m&&m())}),[s,g,i,m]),N=e.useCallback((function(){p&&p(f),f&&b(f),j(!0)}),[f,p]);return e.useEffect((function(){R&&setTimeout((function(){u&&b(u),j(!0)}),y)}),[R,y,u]),e.useEffect((function(){var e;e=i?i.current.classList.contains("lazy-container")?window:i.current:window;var t=g.current;return e.addEventListener("scroll",C),t.addEventListener("error",N),R&&e.removeEventListener("scroll",C),function(){e.removeEventListener("scroll",C),t.removeEventListener("error",N)}}),[i,C,R,N,g]),v?n.default.createElement("video",o({className:x,src:E,ref:g},z)):n.default.createElement("img",o({className:x,src:E,ref:g},z))};l.defaultProps={lazyDelay:500,lazyOffset:0,animation:"fade-in"},module.exports=l;
