import e,{useRef as r,useState as n,useCallback as t,useEffect as o}from"react";import a from"clsx";var i=function(){return i=Object.assign||function(e){for(var r,n=1,t=arguments.length;n<t;n++)for(var o in r=arguments[n])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e},i.apply(this,arguments)};var l=function(l){var c=l.animation,f=l.className,s=l.containerRef,y=l.lazyRef,u=l.lazyOffset,d=l.lazySrc,m=l.lazyError,v=l.lazyDelay,p=l.lazyPlaceholder,z=l.video,O=l.onLoad,g=l.onError,w=function(e,r){var n={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.indexOf(t)<0&&(n[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(t=Object.getOwnPropertySymbols(e);o<t.length;o++)r.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(n[t[o]]=e[t[o]])}return n}(l,["animation","className","containerRef","lazyRef","lazyOffset","lazySrc","lazyError","lazyDelay","lazyPlaceholder","video","onLoad","onError"]),h=r(null),E=y||h,b=n(p||"..."),L=b[0],P=b[1],j=n(!1),R=j[0],x=j[1],N=n(!1),S=N[0],D=N[1],H=a("none"!==c&&R&&"animation ".concat(c),f),B=t((function(){var e=E.current.getBoundingClientRect();if(s){var r=s.current.getBoundingClientRect();r.y>0&&r.y<window.innerHeight&&e.y>=r.y&&e.y<=r.y+r.height&&e.y<=window.innerHeight&&(D(!0),O&&O())}e.top+u<=window.innerHeight&&e.bottom>=0&&(D(!0),O&&O())}),[u,E,s,O]),C=t((function(){g&&g(m),m&&P(m),x(!0)}),[m,g]);return o((function(){S&&setTimeout((function(){d&&P(d),x(!0)}),v)}),[S,v,d]),o((function(){var e;e=s?s.current.classList.contains("lazy-container")?window:s.current:window;var r=E.current;return e.addEventListener("scroll",B),r.addEventListener("error",C),S&&e.removeEventListener("scroll",B),function(){e.removeEventListener("scroll",B),r.removeEventListener("error",C)}}),[s,B,S,C,E]),z?e.createElement("video",i({className:H,src:L,ref:E},w)):e.createElement("img",i({className:H,src:L,ref:E},w))};l.defaultProps={lazyDelay:500,lazyOffset:0,animation:"fade-in"};export{l as default};
