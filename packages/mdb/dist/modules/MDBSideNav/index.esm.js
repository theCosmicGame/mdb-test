import e from"clsx";import n,{useRef as t,useEffect as o,useState as r,useCallback as i}from"react";import s from"react-perfect-scrollbar";var a=function(){return a=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},a.apply(this,arguments)};function l(e,n){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)n.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(t[o[r]]=e[o[r]])}return t}var c=n.createContext({color:"primary"});!function(e,n){void 0===n&&(n={});var t=n.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===t&&o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}("/*\n * Container style\n */\n.ps {\n  overflow: hidden !important;\n  overflow-anchor: none;\n  -ms-overflow-style: none;\n  touch-action: auto;\n  -ms-touch-action: auto;\n}\n\n/*\n * Scrollbar rail styles\n */\n.ps__rail-x {\n  display: none;\n  opacity: 0;\n  transition: background-color .2s linear, opacity .2s linear;\n  -webkit-transition: background-color .2s linear, opacity .2s linear;\n  height: 15px;\n  /* there must be 'bottom' or 'top' for ps__rail-x */\n  bottom: 0px;\n  /* please don't change 'position' */\n  position: absolute;\n}\n\n.ps__rail-y {\n  display: none;\n  opacity: 0;\n  transition: background-color .2s linear, opacity .2s linear;\n  -webkit-transition: background-color .2s linear, opacity .2s linear;\n  width: 15px;\n  /* there must be 'right' or 'left' for ps__rail-y */\n  right: 0;\n  /* please don't change 'position' */\n  position: absolute;\n}\n\n.ps--active-x > .ps__rail-x,\n.ps--active-y > .ps__rail-y {\n  display: block;\n  background-color: transparent;\n}\n\n.ps:hover > .ps__rail-x,\n.ps:hover > .ps__rail-y,\n.ps--focus > .ps__rail-x,\n.ps--focus > .ps__rail-y,\n.ps--scrolling-x > .ps__rail-x,\n.ps--scrolling-y > .ps__rail-y {\n  opacity: 0.6;\n}\n\n.ps .ps__rail-x:hover,\n.ps .ps__rail-y:hover,\n.ps .ps__rail-x:focus,\n.ps .ps__rail-y:focus,\n.ps .ps__rail-x.ps--clicking,\n.ps .ps__rail-y.ps--clicking {\n  background-color: #eee;\n  opacity: 0.9;\n}\n\n/*\n * Scrollbar thumb styles\n */\n.ps__thumb-x {\n  background-color: #aaa;\n  border-radius: 6px;\n  transition: background-color .2s linear, height .2s ease-in-out;\n  -webkit-transition: background-color .2s linear, height .2s ease-in-out;\n  height: 6px;\n  /* there must be 'bottom' for ps__thumb-x */\n  bottom: 2px;\n  /* please don't change 'position' */\n  position: absolute;\n}\n\n.ps__thumb-y {\n  background-color: #aaa;\n  border-radius: 6px;\n  transition: background-color .2s linear, width .2s ease-in-out;\n  -webkit-transition: background-color .2s linear, width .2s ease-in-out;\n  width: 6px;\n  /* there must be 'right' for ps__thumb-y */\n  right: 2px;\n  /* please don't change 'position' */\n  position: absolute;\n}\n\n.ps__rail-x:hover > .ps__thumb-x,\n.ps__rail-x:focus > .ps__thumb-x,\n.ps__rail-x.ps--clicking .ps__thumb-x {\n  background-color: #999;\n  height: 11px;\n}\n\n.ps__rail-y:hover > .ps__thumb-y,\n.ps__rail-y:focus > .ps__thumb-y,\n.ps__rail-y.ps--clicking .ps__thumb-y {\n  background-color: #999;\n  width: 11px;\n}\n\n/* MS supports */\n@supports (-ms-overflow-style: none) {\n  .ps {\n    overflow: auto !important;\n  }\n}\n\n@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {\n  .ps {\n    overflow: auto !important;\n  }\n}\n.scrollbar-container {\n  position: relative;\n  height: 100%; }");var u=function(r){var i=r.className,c=r.sidenav,u=r.tag,p=r.handlers,h=r.wheelSpeed,d=r.wheelPropagation,v=r.swipeEasing,f=r.minScrollbarLength,m=r.maxScrollbarLength,g=r.scrollingThreshold,y=r.useBothWheelAxes,b=r.suppressScrollX,w=r.suppressScrollY,x=r.scrollXMarginOffset,_=r.scrollYMarginOffset,E=r.scrollBarRef,L=r.children,S=l(r,["className","sidenav","tag","handlers","wheelSpeed","wheelPropagation","swipeEasing","minScrollbarLength","maxScrollbarLength","scrollingThreshold","useBothWheelAxes","suppressScrollX","suppressScrollY","scrollXMarginOffset","scrollYMarginOffset","scrollBarRef","children"]),k=e(c&&"sidenav-menu",i),O=t(null);o((function(){E&&E(O)}),[E]);var P=a(a({},p),{wheelSpeed:h,wheelPropagation:d,swipeEasing:v,minScrollbarLength:f,maxScrollbarLength:m,scrollingThreshold:g,useBothWheelAxes:y,suppressScrollX:b,suppressScrollY:w,scrollXMarginOffset:x,scrollYMarginOffset:_});return n.createElement(s,a({className:k,ref:O,component:u,options:P},S),L)};u.defaultProps={tag:"div",handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],wheelSpeed:1,wheelPropagation:!0,swipeEasing:!0,minScrollbarLength:void 0,maxScrollbarLength:void 0,scrollingThreshold:1e3,useBothWheelAxes:!1,suppressScrollX:!1,suppressScrollY:!1,scrollXMarginOffset:0,scrollYMarginOffset:0};var p=function(e){var n=e.touches[0];return{x:n.clientX,y:n.clientY}},h=function(e){var n=e.x,t=e.y;return{x:{direction:n<0?"left":"right",value:Math.abs(n)},y:{direction:t<0?"up":"down",value:Math.abs(t)}}},d=function(e,n){var t=e.x,o=e.y;return{x:t-n.x,y:o-n.y}},v=function(e){var n=e.x1,t=e.x2,o=e.y1;return{x:n+(t-n)/2,y:o+(e.y2-o)/2}},f=function(e){var n,t,o,r,i,s=e[0],a=e[1],l={x1:s.clientX,x2:a.clientX,y1:s.clientY,y2:a.clientY};return[(n=l,t=n.x1,o=n.x2,r=n.y1,i=n.y2,Math.sqrt(Math.pow(o-t,2)+Math.pow(i-r,2))),v(l)]},m=function(e,n){return"number"==typeof e&&"number"==typeof n&&!isNaN(e)&&!isNaN(n)},g=function(e){var s=e.tag,c=e.children,u=e.touchRef,v=e.type,g=e.threshold,y=e.allDirections,b=e.onSwipe,w=e.onSwipeLeft,x=e.onSwipeRight,_=e.onSwipeUp,E=e.onSwipeDown,L=e.onPan,S=e.onPanLeft,k=e.onPanRight,O=e.onPanUp,P=e.onPanDown,M=e.onPinch,T=e.onRotate,N=e.onTap,X=e.onPress,D=e.pointers,R=e.interval,C=e.taps,Y=e.duration,B=l(e,["tag","children","touchRef","type","threshold","allDirections","onSwipe","onSwipeLeft","onSwipeRight","onSwipeUp","onSwipeDown","onPan","onPanLeft","onPanRight","onPanUp","onPanDown","onPinch","onRotate","onTap","onPress","pointers","interval","taps","duration"]),j=t(null),A=u||j,H=r(null),U=H[0],W=H[1],I=r(null),z=I[0],q=I[1],V=r(null),F=V[0],G=V[1],J=r(null),K=J[0],Q=J[1],Z=r({x:0,y:0}),$=Z[0],ee=Z[1],ne=r(null),te=ne[0],oe=ne[1],re=r(0),ie=re[0],se=re[1],ae=r(0),le=ae[0],ce=ae[1],ue=r(0),pe=ue[0],he=ue[1],de=r(0),ve=de[0],fe=de[1],me=r(0),ge=me[0],ye=me[1],be=r({x:0,y:0}),we=be[0],xe=be[1],_e=r(0),Ee=_e[0],Le=_e[1],Se=r(null),ke=Se[0],Oe=Se[1],Pe=t();o((function(){"tap"===v&&(1===Ee&&(Pe.current=window.setTimeout((function(){Le(0)}),R)),Ee===C&&(window.clearTimeout(Pe.current),Le(0),N&&N(ke)))}),[Ee,R,C,N,ke,v]);var Me=i((function(e){e.touches.length===D&&(Le(Ee+1),Oe(e))}),[D,Ee]),Te=i((function(){}),[]),Ne=i((function(){}),[]),Xe=i((function(e){e.touches.length===D&&(Pe.current=window.setTimeout((function(){X&&X(e,Y)}),Y))}),[Y,D,X]),De=i((function(){}),[]),Re=i((function(){window.clearTimeout(Pe.current)}),[]),Ce=i((function(e){W(p(e))}),[]),Ye=i((function(e){return"left"===e?w:"right"===e?x:"up"===e?_:"down"===e?E:void 0}),[E,w,x,_]),Be=i((function(e){if("touchmove"===e.type&&e.preventDefault(),U){var n=p(e),t={x:n.x-U.x,y:n.y-U.y},o=h(t),r=o.x,i=o.y;if(y){if(g&&i.value<g&&r.value<g)return;var s=i.value>r.value?i.direction:r.direction;return b&&b(e,{direction:s}),void W(null)}var a=x||w?"x":"y";if(g&&o[a].value>g){var l=Ye(o[a].direction);l&&l(e),W(null)}}}),[y,b,U,g,x,w,Ye]),je=i((function(){W(null)}),[]),Ae=i((function(e){q(p(e)),G(e)}),[]),He=i((function(e){return"left"===e?S:"right"===e?k:"up"===e?O:"down"===e?P:void 0}),[P,S,k,O]),Ue=i((function(e){"touchmove"===e.type&&e.preventDefault();var n=p(e),t=p(F),o=d(n,z),r=d(n,t),i=h(o),s=h(r),a=i.x,l=i.y;g&&y&&(l.value>g||a.value>g)&&L&&L(e);var c=S||k?"x":"y";if(g&&i[c].value>g){var u=He(s[c].direction);u&&u(e)}G(e)}),[y,F,z,g,L,S,k,He]),We=i((function(e){"touchend"===e.type&&e.preventDefault(),q(null),G(null)}),[]),Ie=i((function(e){if(e.touches.length===D){"touchstart"===e.type&&e.preventDefault();var n=f(e.touches),t=n[0],o=n[1];Q(t),q(t),ee(o)}}),[D]),ze=i((function(e){e.touches.length===D&&("touchmove"===e.type&&e.preventDefault(),Q(f(e.touches)[0]),"number"==typeof z&&"number"==typeof K&&oe(K/z),m(z,K)&&"object"==typeof $&&(g&&$.x>g||g&&$.y>g)&&(q(K),M&&M(e,{ratio:te,origin:$})))}),[D,z,K,g,M,$,te]),qe=i((function(){m(z,K)&&q(null)}),[z,K]),Ve=i((function(e){if("touchstart"===e.type&&e.preventDefault(),1===e.touches.length&&1===D){var n=e.target.element.getBoundingClientRect(),t=n.left,o=n.top,r=n.width,i=n.height;xe({x:t+r/2,y:o+i/2})}else{if(2!==e.touches.length||2!==D)return;var s=e.touches,a=s[0],l=s[1],c={x1:l.clientX,x2:a.clientX,y1:l.clientY,y2:a.clientY};xe({x:(c.x1+c.x2)/2,y:(c.y1+c.y2)/2})}}),[D]),Fe=i((function(e){var n;if("touchmove"===e.type&&e.preventDefault(),1===e.touches.length&&1===D)n=e.touches[0];else{if(2!==e.touches.length||2!==D)return;n=function(e){for(var n=null,t=Number.MIN_VALUE,o=0,r=e;o<r.length;o++){var i=r[o];i.clientX>t&&(n=i)}return n}(e.touches)}se(function(e,n,t,o){var r=Math.atan2(o-n,t-e)*(180/Math.PI);return Math.round(r+360)%360}(we.x,we.y,n.clientX,n.clientY)),pe?(ye(ie-le),fe(ve+ge)):(ce(ie),he(ie),fe(0),ye(0)),ce(ie),T&&T(e,{currentAngle:ie,distance:ve,change:ge})}),[ge,ie,le,we,T,ve,pe,D]),Ge=i((function(e){"touchend"===e.type&&e.preventDefault(),se(0),he(0),ce(0),ye(0),fe(0)}),[]);return o((function(){var e=A.current;return"tap"===v&&(e.addEventListener("touchstart",Me),e.addEventListener("touchmove",Te),e.addEventListener("touchend",Ne)),"press"===v&&(e.addEventListener("touchstart",Xe),e.addEventListener("touchmove",De),e.addEventListener("touchend",Re)),"swipe"===v&&(e.addEventListener("touchstart",Ce),e.addEventListener("touchmove",Be),e.addEventListener("touchend",je)),"pan"===v&&(e.addEventListener("touchstart",Ae),e.addEventListener("touchmove",Ue),e.addEventListener("touchend",We)),"pinch"===v&&(e.addEventListener("touchstart",Ie),e.addEventListener("touchmove",ze),e.addEventListener("touchend",qe)),"rotate"===v&&(e.addEventListener("touchstart",Ve),e.addEventListener("touchmove",Fe),e.addEventListener("touchend",Ge)),function(){"tap"===v&&(e.removeEventListener("touchstart",Me),e.removeEventListener("touchmove",Te),e.removeEventListener("touchend",Ne)),"press"===v&&(e.removeEventListener("touchstart",Xe),e.removeEventListener("touchmove",De),e.removeEventListener("touchend",Re)),"swipe"===v&&(e.removeEventListener("touchstart",Ce),e.removeEventListener("touchmove",Be),e.removeEventListener("touchend",je)),"pan"===v&&(e.removeEventListener("touchstart",Ae),e.removeEventListener("touchmove",Ue),e.removeEventListener("touchend",We)),"pinch"===v&&(e.removeEventListener("touchstart",Ie),e.removeEventListener("touchmove",ze),e.removeEventListener("touchend",qe)),"rotate"===v&&(e.removeEventListener("touchstart",Ve),e.removeEventListener("touchmove",Fe),e.removeEventListener("touchend",Ge))}}),[A,Me,Te,Ne,Xe,De,Re,Ce,Be,je,Ae,Ue,We,Ie,ze,qe,Ve,Fe,Ge,v]),n.createElement(s,a({ref:A},B),c)};g.defaultProps={tag:"div",interval:500,duration:250,taps:1,pointers:1,threshold:10,allDirections:!1};var y=function(s){var p=s.className,h=s.isOpen,d=s.getOpenState,v=s.children,f=s.color,m=s.backdrop,y=s.slim,b=s.slimCollapsed,w=s.constant,x=s.bgColor,_=s.right,E=s.relative,L=s.absolute,S=s.light,k=s.mode,O=s.contentRef,P=s.closeOnEsc,M=s.onShow,T=s.onHide,N=s.onExpand,X=s.onCollapse,D=l(s,["className","isOpen","getOpenState","children","color","backdrop","slim","slimCollapsed","constant","bgColor","right","relative","absolute","light","mode","contentRef","closeOnEsc","onShow","onHide","onExpand","onCollapse"]),R=r(h),C=R[0],Y=R[1],B=r(h),j=B[0],A=B[1],H=r(0),U=H[0],W=H[1],I=r(b),z=I[0],q=I[1],V=e("sidenav",f&&"sidenav-".concat(f),x&&"bg-".concat(x),C?"sidenav-shown":"sidenav-hidden",E&&"sidenav-relative",L&&"sidenav-absolute",S&&"sidenav-theme-light",_&&"sidenav-right",y&&"sidenav-slim",y&&z&&"sidenav-slim-collapsed",p),F=e("sidenav-content",C?_?"right-side-shown":"side-shown":"side-hidden"),G=e("sidenav-content",C?_?"right-push-shown":"push-shown":"push-hidden"),J=t(null),K=i((function(e){var n;w||!m||e.target===J.current||(null===(n=J.current)||void 0===n?void 0:n.contains(e.target))||(Y(!1),d&&d(!1))}),[J,d,w,m]),Q=i((function(e){P&&"Escape"===e.key&&(Y(!1),d&&d(!1))}),[d,P]),Z=i((function(){var e;W(E||L?null===(e=J.current)||void 0===e?void 0:e.offsetHeight:window.innerHeight)}),[L,E]);return o((function(){var e;W(null===(e=J.current)||void 0===e?void 0:e.offsetHeight)}),[]),o((function(){O&&(O.className="push"===k?G:"side"===k?F:"sidenav-content")}),[k,O,F,G]),o((function(){return C&&(document.addEventListener("click",K),document.addEventListener("keydown",Q),window.addEventListener("resize",Z)),function(){document.removeEventListener("click",K),document.removeEventListener("keydown",Q),window.removeEventListener("resize",Z)}}),[K,Q,Z,C]),o((function(){y&&(q(b),b?null==X||X():null==N||N())}),[b,y]),o((function(){Y(h),d&&d(h)}),[h,d]),o((function(){var e,n;return C?(A(!0),e=setTimeout((function(){Y(!0),null==M||M()}),4)):(Y(!1),n=setTimeout((function(){A(!1),null==T||T()}),300)),function(){clearTimeout(e),clearTimeout(n)}}),[C]),n.createElement(c.Provider,{value:{color:f}},n.createElement(g,a({type:"swipe",onSwipeLeft:function(){y&&C&&!z&&(q(!0),null==N||N())},onSwipeRight:function(){y&&C&&z&&(q(!1),null==X||X())},tag:"nav",className:V,touchRef:J},D),n.createElement(u,{suppressScrollX:!0,style:{height:U}},v)),m&&j&&n.createElement("div",{className:"sidenav-backdrop",style:{transition:"opacity 0.3s ease-out 0s",position:L?"absolute":"fixed",width:"100%",height:"100%",opacity:C?1:0}}))};y.defaultProps={color:"primary",slimCollapsed:!0,isOpen:!0,backdrop:!0,mode:"over",closeOnEsc:!0,constant:!1};export{y as default};
