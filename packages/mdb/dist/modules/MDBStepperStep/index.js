"use strict";var e=require("clsx"),t=require("react");function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=n(e),i=n(t),l=function(){return l=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},l.apply(this,arguments)};function r(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(n[a[i]]=e[a[i]])}return n}var o=i.default.createContext({activeItem:1,setActiveItem:null,prevActive:{current:1},setHeight:null,completed:[],noEditable:!1,isAnimating:{current:!1},linear:!1,formRef:{current:null},validate:{target:0,after:0},setValidate:null,type:"horizontal",stepsLength:0,onValid:void 0,onInvalid:void 0,mobileProgress:!1,disableHeadSteps:!1}),s=function(e){var n=e.animation,o=e.animationRef,s=e.className,u=e.children,c=e.delay,d=e.infinite,f=e.duration,m=e.enableTarget,p=e.target,v=e.repeatOnScroll,g=e.reset,y=e.setTarget,h=e.start,E=e.style,b=e.tag,S=r(e,["animation","animationRef","className","children","delay","infinite","duration","enableTarget","target","repeatOnScroll","reset","setTarget","start","style","tag"]),w=t.useState(!!p),C=w[0],N=w[1],I=t.useState(!1),T=I[0],x=I[1],H=t.useRef(!0),O=a.default(C&&"animation",C&&n,s),R=t.useRef(null),V=o||R,L=function(){N(!C)},A=t.useCallback((function(){if(V.current){var e=V.current.getBoundingClientRect().top+document.body.scrollTop,t=V.current.offsetHeight,n=e<=window.innerHeight&&e+t>=0;n&&H.current?(H.current=!1,c?setTimeout((function(){N(!0),x(!0)}),c):(N(!0),x(!0))):!n&&v&&(x(!1),H.current=!0)}}),[V,v,c]);return t.useEffect((function(){return"onScroll"===h&&window.addEventListener("scroll",A),function(){window.removeEventListener("scroll",A)}}),[A,h]),t.useEffect((function(){N(!!p)}),[p]),t.useEffect((function(){"onLoad"===h&&N(!0)}),[h]),t.useEffect((function(){C&&!d&&g&&setTimeout((function(){N(!C),m&&y(!1)}),f)}),[C,f,m,y,d,g]),i.default.createElement(i.default.Fragment,null,"onClick"===h&&!1===m&&i.default.createElement(b,l({onClick:L,className:O,ref:V},S,{style:l(l({},E),{animationDuration:"".concat(f,"ms"),animationIterationCount:d?"infinite":null,animationDelay:c?"".concat(c,"ms"):null})}),u),"onHover"===h&&!1===m&&i.default.createElement(b,l({onMouseEnter:L,className:O,ref:V},S,{style:l(l({},E),{animationDuration:"".concat(f,"ms"),animationIterationCount:d?"infinite":null,animationDelay:c?"".concat(c,"ms"):null})}),u),("onLoad"===h||!0===m)&&i.default.createElement(b,l({className:O,ref:V},S,{style:l(l({},E),{animationDuration:"".concat(f,"ms"),animationIterationCount:d?"infinite":null,animationDelay:c?"".concat(c,"ms"):null})}),u),"onScroll"===h&&i.default.createElement(b,l({className:O,ref:V},S,{style:l(l({},E),{animationDuration:"".concat(f,"ms"),visibility:T?"visible":"hidden",animationIterationCount:d?"infinite":null})}),u))};s.defaultProps={enableTarget:!1,target:!1,tag:"div",start:"onClick",duration:500,animation:"slide-right"};var u=function(e){var n=e.itemId,r=e.children,u=e.className,c=e.style,d=t.useContext(o),f=d.activeItem,m=d.prevActive,p=t.useState(n===f),v=p[0],g=p[1],y=t.useState(!1),h=y[0],E=y[1],b=a.default("stepper-content","py-3",!v&&"stepper-content-hide",u),S=function(e,t,n){var i=n>t,l=n<t;return e?a.default(i&&"slide-out-left",l&&"slide-out-right"):a.default(i&&"slide-in-right",l&&"slide-in-left")}(h,m.current,f),w=l({display:v||h?"block":"none"},c);return t.useEffect((function(){var e=m.current;n===e&&(E(!0),setTimeout((function(){E(!1)}),800))}),[n,m,f]),t.useEffect((function(){g(n===f)}),[n,f]),i.default.createElement(s,{className:b,start:"onLoad",animation:S,duration:800,style:w},i.default.createElement("span",null,r))},c=function(e){var n=e.itemId,l=e.children,r=e.className,s=e.isValidated,u=e.style,c=t.useContext(o).activeItem,d=t.useState(!0),f=d[0],m=d[1],p=a.default("stepper-content","py-3",!f&&"stepper-content-hide",r),v=t.useRef(null);return function(e){var n=e.stepRef,a=e.show,i=e.isValidated,l=t.useRef({paddingTop:0,paddingBottom:0}),r=t.useCallback((function(){var e=n.current;if(e){var t;if(a)e.style.height="",t=e.scrollHeight;else{var i=l.current,r=i.paddingBottom,o=i.paddingTop;t=e.scrollHeight+r+o}e.style.height="".concat(t,"px")}}),[n,l,a]);t.useEffect((function(){var e=n.current;if(e){var t=window.getComputedStyle(e),a=t.paddingTop,i=t.paddingBottom;l.current={paddingBottom:parseFloat(i),paddingTop:parseFloat(a)},e.style.height="".concat(e.scrollHeight,"px")}}),[n]),t.useEffect((function(){return i&&setTimeout((function(){r()}),210),window.addEventListener("resize",r),function(){window.removeEventListener("resize",r)}}),[r,i])}({stepRef:v,show:f,isValidated:s}),t.useEffect((function(){m(n===c)}),[n,c]),i.default.createElement("div",{style:u,className:p,ref:v},i.default.createElement("span",null,l))},d=function(e){var n=e.className,s=e.itemId,d=e.children,f=e.headIcon,m=e.headText,p=e.customValidation,v=e.headClassName,g=e.contentClassName,y=e.headStyle,h=e.contentStyle,E=r(e,["className","itemId","children","headIcon","headText","customValidation","headClassName","contentClassName","headStyle","contentStyle"]),b=t.useContext(o),S=b.activeItem,w=b.setActiveItem,C=b.setHeight,N=b.prevActive,I=b.completed,T=b.noEditable,x=b.linear,H=b.formRef,O=b.validate,R=b.setValidate,V=b.type,L=b.onInvalid,A=b.onValid,k=b.mobileProgress,F=b.isAnimating,q=b.disableHeadSteps,B=t.useState(!1),P=B[0],j=B[1],D=t.useState(!1),z=D[0],M=D[1],G=I.includes(s),J=S===s,K=T&&G&&!J,Q=x&&P,U=a.default("stepper-step",J&&"stepper-active",G&&"stepper-completed",K&&"stepper-disabled",Q&&"was-validated",z&&"stepper-invalid",n),W=a.default("stepper-head",v),X=t.useRef(null),Y=l({cursor:a.default(q&&"auto")},y);!function(e){var n=e.stepRef,a=e.setHeight,i=e.isActive,l=e.isValidated,r=e.isMobile,o=e.children,s=t.useCallback((function(){var e,t,i,l=n.current,o=null==l?void 0:l.querySelector(".stepper-content"),s=o&&getComputedStyle(o),u=null===(e=null==l?void 0:l.parentNode)||void 0===e?void 0:e.querySelector(".stepper-mobile-footer"),c=u?getComputedStyle(u):"",d=(i=r?null===(t=null==l?void 0:l.parentNode)||void 0===t?void 0:t.querySelector(".stepper-mobile-head"):null==l?void 0:l.querySelector(".stepper-head"))&&getComputedStyle(i),f=(null==o?void 0:o.offsetHeight)+parseFloat(null==s?void 0:s.marginTop)+parseFloat(null==s?void 0:s.marginBottom),m=(null==i?void 0:i.offsetHeight)+parseFloat(null==d?void 0:d.marginTop)+parseFloat(null==d?void 0:d.marginBottom),p=c?(null==u?void 0:u.offsetHeight)+parseFloat(null==c?void 0:c.marginTop)+parseFloat(null==c?void 0:c.marginBottom):0;a(m+f+p)}),[a,n,r]);t.useEffect((function(){if(i)return setTimeout((function(){s()}),10),l&&setTimeout((function(){s()}),210),window.addEventListener("resize",s),function(){window.removeEventListener("resize",s)}}),[i,s,l]),t.useEffect((function(){s()}),[o,s])}({stepRef:X,setHeight:C,isActive:J,isValidated:P,isMobile:"mobile"===V,children:d});return t.useEffect((function(){var e=O.target,t=O.after;if(s===e&&x){if(t<e)return N.current=e,void w(t);var n=X.current,a=H.current;null==a||a.classList.add("was-validated");var i=function(e,t){return Array.from(e.querySelectorAll("input[required]")).every((function(e){return t?t(e):e.checkValidity()}))}(n,p);j(!0),M(!i),i?(null==A||A(s),null==a||a.classList.remove("was-validated"),N.current=e,w(t)):null==L||L(s)}}),[O,s,H,x,w,N,A,L,p]),i.default.createElement("li",l({ref:X,className:U},E),!k&&i.default.createElement("div",{className:W,tabIndex:J?0:-1,onClick:function(){var e=F.current&&"vertical"!==V&&S!==N.current;K||J||q||e||(x?R({target:S,after:s}):(N.current=S,w(s)))},style:Y},i.default.createElement("span",{className:"stepper-head-icon"},f),i.default.createElement("span",{className:"stepper-head-text"},m)),"vertical"===V?i.default.createElement(c,{style:h,className:g,isValidated:P,itemId:s},d):i.default.createElement(u,{style:h,className:g,itemId:s},d))};d.defaultProps={icon:0,text:"none"},module.exports=d;
