"use strict";var e=require("clsx"),t=require("react");function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=n(e),a=n(t),l=function(){return l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},l.apply(this,arguments)};function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}function i(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e}var c=a.default.createContext({activeItem:1,setActiveItem:null,prevActive:{current:1},setHeight:null,completed:[],noEditable:!1,isAnimating:{current:!1},linear:!1,formRef:{current:null},validate:{target:0,after:0},setValidate:null,type:"horizontal",stepsLength:0,onValid:void 0,onInvalid:void 0,mobileProgress:!1,disableHeadSteps:!1}),u=function(e){var n=e.ofLabel,r=void 0===n?"of":n,l=e.stepLabel,o=void 0===l?"step":l,i=t.useContext(c),u=i.activeItem,f=i.stepsLength;return a.default.createElement("div",{className:"stepper-mobile-head bg-light"},o," ",u," ",r," ",f)},f=function(e){var n=o(e,[]),i=t.useState(!1),c=i[0],u=i[1],f=r.default("ripple-wave",c&&"active");return t.useEffect((function(){var e=setTimeout((function(){u(!0)}),50);return function(){clearTimeout(e)}}),[]),a.default.createElement("div",l({className:f},n))},s=a.default.forwardRef((function(e,n){var i=e.className,c=e.rippleTag,u=e.rippleCentered,s=e.rippleDuration,d=e.rippleUnbound,p=e.rippleRadius,b=e.rippleColor,m=e.children,v=e.onClick,g=o(e,["className","rippleTag","rippleCentered","rippleDuration","rippleUnbound","rippleRadius","rippleColor","children","onClick"]),h=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=a.default.useRef();return a.default.useEffect((function(){e.forEach((function(e){e&&("function"==typeof e?e(n.current):e.current=n.current)}))}),[e]),n}(n,t.useRef(null)),y=[0,0,0],E=["primary","secondary","success","danger","warning","info","light","dark"],k=t.useState([]),L=k[0],x=k[1],N=t.useState(!1),C=N[0],S=N[1],R=r.default("ripple","ripple-surface",d&&"ripple-surface-unbound",C&&"ripple-surface-".concat(b),i),w=function(){if(E.find((function(e){return e===(null==b?void 0:b.toLowerCase())})))return S(!0);var e=I(b).join(","),t="rgba({{color}}, 0.2) 0, rgba({{color}}, 0.3) 40%, rgba({{color}}, 0.4) 50%, rgba({{color}}, 0.5) 60%, rgba({{color}}, 0) 70%".split("{{color}}").join("".concat(e));return"radial-gradient(circle, ".concat(t,")")},I=function(e){return"transparent"===e.toLowerCase()?y:"#"===e[0]?function(e){return e.length<7&&(e="#".concat(e[1]).concat(e[1]).concat(e[2]).concat(e[2]).concat(e[3]).concat(e[3])),[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16)]}(e):(-1===e.indexOf("rgb")&&(e=function(e){var t=document.body.appendChild(document.createElement("fictum")),n="rgb(1, 2, 3)";return t.style.color=n,t.style.color!==n?y:(t.style.color=e,t.style.color===n||""===t.style.color?y:(e=getComputedStyle(t).color,document.body.removeChild(t),e))}(e)),0===e.indexOf("rgb")?function(e){return(e=e.match(/[.\d]+/g).map((function(e){return+Number(e)}))).length=3,e}(e):y)},O=function(e){var t,n=null===(t=h.current)||void 0===t?void 0:t.getBoundingClientRect(),r=e.clientX-n.left,a=e.clientY-n.top,o=n.height,i=n.width,c={delay:s&&.5*s,duration:s&&s-.5*s},f=function(e){var t=e.offsetX,n=e.offsetY,r=e.height,a=e.width,l=n<=r/2,o=t<=a/2,i=function(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))},c=n===r/2&&t===a/2,u=!0===l&&!1===o,f=!0===l&&!0===o,s=!1===l&&!0===o,d=!1===l&&!1===o,p={topLeft:i(t,n),topRight:i(a-t,n),bottomLeft:i(t,r-n),bottomRight:i(a-t,r-n)},b=0;return c||d?b=p.topLeft:s?b=p.topRight:f?b=p.bottomRight:u&&(b=p.bottomLeft),2*b}({offsetX:u?o/2:r,offsetY:u?i/2:a,height:o,width:i}),d=p||f/2,b={left:"".concat(u?i/2-d:r-d,"px"),top:"".concat(u?o/2-d:a-d,"px"),height:"".concat(p?2*p:f,"px"),width:"".concat(p?2*p:f,"px"),transitionDelay:"0s, ".concat(c.delay,"ms"),transitionDuration:"".concat(s,"ms, ").concat(c.duration,"ms")};return C?b:l(l({},b),{backgroundImage:"".concat(w())})};return t.useEffect((function(){var e=setTimeout((function(){L.length>0&&x(L.splice(1,L.length-1))}),s);return function(){clearTimeout(e)}}),[s,L]),a.default.createElement(c,l({className:R,onClick:function(e){return function(e){var t=O(e),n=L.concat(t);x(n),v&&v(e)}(e)},ref:h},g),m,L.map((function(e,t){return a.default.createElement(f,{key:t,style:e})})))}));s.defaultProps={rippleTag:"div",rippleDuration:500,rippleRadius:0,rippleColor:"dark"};var d=a.default.forwardRef((function(e,n){var i,c=e.className,u=e.color,f=e.outline,d=e.children,p=e.rounded,b=e.disabled,m=e.floating,v=e.size,g=e.href,h=e.block,y=e.active,E=e.toggle,k=e.noRipple,L=e.tag,x=o(e,["className","color","outline","children","rounded","disabled","floating","size","href","block","active","toggle","noRipple","tag"]),N=t.useState(y||!1),C=N[0],S=N[1],R=u&&["light","link"].includes(u)||f?"dark":"light";i="none"!==u?f?u?"btn-outline-".concat(u):"btn-outline-primary":u?"btn-".concat(u):"btn-primary":"";var w=r.default("none"!==u&&"btn",i,p&&"btn-rounded",m&&"btn-floating",v&&"btn-".concat(v),"".concat((g||"button"!==L)&&b?"disabled":""),h&&"btn-block",C&&"active",c);return g&&"a"!==L&&(L="a"),["hr","img","input"].includes(L)||k?a.default.createElement(L,l({className:w,onClick:E?function(){S(!C)}:void 0,disabled:!(!b||"button"!==L)||void 0,href:g,ref:n},x),d):a.default.createElement(s,l({rippleTag:L,rippleColor:R,className:w,onClick:E?function(){S(!C)}:void 0,disabled:!(!b||"button"!==L)||void 0,href:g,ref:n},x),d)}));d.defaultProps={tag:"button",role:"button",color:"primary"};var p=function(e){var t,n=e.animate,i=e.className,c=e.icon,u=e.fab,f=e.fas,s=e.fal,d=e.far,p=e.flag,b=e.spin,m=e.fixed,v=e.flip,g=e.list,h=e.size,y=e.pull,E=e.pulse,k=e.color,L=e.border,x=e.rotate,N=e.inverse,C=e.stack,S=e.iconType,R=e.children,w=o(e,["animate","className","icon","fab","fas","fal","far","flag","spin","fixed","flip","list","size","pull","pulse","color","border","rotate","inverse","stack","iconType","children"]);t=p?"flag":u?"fab":f?"fas":d?"far":s?"fal":"fa";var I=r.default(S?"fa-".concat(S):t,n&&"fa-".concat(n),p?"flag-".concat(p):c&&"fa-".concat(c),h&&"fa-".concat(h),k&&"text-".concat(k),L&&"fa-border",x&&"fa-rotate-".concat(x),y&&"fa-pull-".concat(y),b&&!n&&"fa-spin",g&&"fa-li",m&&"fa-fw",E&&!n&&"fa-pulse",N&&"fa-inverse",v&&"fa-flip-".concat(v),C&&"fa-stack-".concat(C),i);return a.default.createElement("i",l({className:I},w),R)},b=function(e){var n=e.mobileProgress,r=e.backLabel,l=void 0===r?"BACK":r,o=e.nextLabel,i=void 0===o?"NEXT":o,u=t.useContext(c),f=u.activeItem,s=u.setActiveItem,b=u.prevActive,m=u.isAnimating,v=u.stepsLength;return a.default.createElement("div",{className:"stepper-mobile-footer bg-light"},a.default.createElement("div",{className:"stepper-back-btn"},a.default.createElement(d,{color:"link",onClick:function(){m.current&&f!==b.current||(b.current=f,s(1!==f?f-1:f))}},a.default.createElement(p,{fas:!0,icon:"chevron-left"}),l)),n&&a.default.createElement("div",{className:"stepper-mobile-progress gray-500"},a.default.createElement("div",{className:"stepper-mobile-progress-bar bg-primary",style:{width:"".concat(f/v*100,"%")}})),a.default.createElement("div",{className:"stepper-next-btn"},a.default.createElement(d,{color:"link",onClick:function(){m.current&&f!==b.current||(b.current=f,s(f!==v?f+1:f))}},i,a.default.createElement(p,{fas:!0,icon:"chevron-right"}))))},m=function(e){var n=e.className,f=e.children,s=e.defaultStep,d=void 0===s?1:s,p=e.linear,m=e.noEditable,v=e.externalNext,g=e.externalPrev,h=e.style,y=e.type,E=e.onChange,k=e.onInvalid,L=e.onValid,x=e.mobileProgress,N=e.disableHeadSteps,C=e.mobileOfLabel,S=e.mobileStepLabel,R=e.mobileBackLabel,w=e.mobileNextLabel,I=o(e,["className","children","defaultStep","linear","noEditable","externalNext","externalPrev","style","type","onChange","onInvalid","onValid","mobileProgress","disableHeadSteps","mobileOfLabel","mobileStepLabel","mobileBackLabel","mobileNextLabel"]),O=t.useState(d),P=O[0],T=O[1],A=t.useState(void 0),j=A[0],z=A[1],H=t.useState([]),V=H[0],D=H[1],q=t.useState({target:0,after:0}),B=q[0],X=q[1],M=t.useState(0),Y=M[0],U=M[1],K=t.useRef(d),F=t.useRef(!1),G="mobile"===y,J=r.default("stepper","horizontal"===y&&"stepper-horizontal","vertical"===y&&"stepper-vertical",G&&"stepper-mobile",n),Q=l({height:r.default("vertical"!==y&&j&&"".concat(j,"px"))},h),W=t.useRef(null),Z=t.useRef(null);return t.useEffect((function(){var e=function(){T((function(e){if(F.current&&e!==K.current)return e;K.current=e;var t=e!==Y?e+1:e;return p?(X({target:e,after:t}),e):t}))},t=null==v?void 0:v.current;if(t)return t.addEventListener("click",e),function(){t.removeEventListener("click",e)}}),[v,K,p,Y]),t.useEffect((function(){var e=function(){T((function(e){if(F.current&&e!==K.current)return e;K.current=e;var t=1!==e?e-1:e;return p?(X({target:e,after:t}),e):t}))},t=null==g?void 0:g.current;if(t)return t.addEventListener("click",e),function(){t.removeEventListener("click",e)}}),[g,K,p]),t.useEffect((function(){D((function(e){return e.includes(P)?e:i(i([],e),[P])})),null==E||E(P)}),[P,E]),t.useEffect((function(){F.current=!0,setTimeout((function(){F.current=!1}),500)}),[P]),t.useEffect((function(){var e=W.current;if(e){var t=e.querySelectorAll("li").length;U(t)}}),[]),a.default.createElement("ul",l({ref:W,className:J},I,{style:Q}),a.default.createElement(c.Provider,{value:{activeItem:P,setActiveItem:T,prevActive:K,setHeight:z,completed:V,noEditable:m,isAnimating:F,linear:p,formRef:Z,validate:B,setValidate:X,type:y,stepsLength:Y,onValid:L,onInvalid:k,mobileProgress:x,disableHeadSteps:N}},G&&a.default.createElement(u,{ofLabel:C,stepLabel:S}),f,G&&a.default.createElement(b,{backLabel:R,nextLabel:w,mobileProgress:x})))};m.defaultProps={type:"horizontal"},module.exports=m;
