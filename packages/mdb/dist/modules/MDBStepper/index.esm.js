import e from"clsx";import t,{useContext as n,useState as r,useEffect as a,useRef as o}from"react";var i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)};function l(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}function c(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e}var s=t.createContext({activeItem:1,setActiveItem:null,prevActive:{current:1},setHeight:null,completed:[],noEditable:!1,isAnimating:{current:!1},linear:!1,formRef:{current:null},validate:{target:0,after:0},setValidate:null,type:"horizontal",stepsLength:0,onValid:void 0,onInvalid:void 0,mobileProgress:!1,disableHeadSteps:!1}),u=function(e){var r=e.ofLabel,a=void 0===r?"of":r,o=e.stepLabel,i=void 0===o?"step":o,l=n(s),c=l.activeItem,u=l.stepsLength;return t.createElement("div",{className:"stepper-mobile-head bg-light"},i," ",c," ",a," ",u)},f=function(n){var o=l(n,[]),c=r(!1),s=c[0],u=c[1],f=e("ripple-wave",s&&"active");return a((function(){var e=setTimeout((function(){u(!0)}),50);return function(){clearTimeout(e)}}),[]),t.createElement("div",i({className:f},o))},p=t.forwardRef((function(n,c){var s=n.className,u=n.rippleTag,p=n.rippleCentered,d=n.rippleDuration,m=n.rippleUnbound,b=n.rippleRadius,v=n.rippleColor,g=n.children,h=n.onClick,y=l(n,["className","rippleTag","rippleCentered","rippleDuration","rippleUnbound","rippleRadius","rippleColor","children","onClick"]),E=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=t.useRef();return t.useEffect((function(){e.forEach((function(e){e&&("function"==typeof e?e(r.current):e.current=r.current)}))}),[e]),r}(c,o(null)),k=[0,0,0],L=["primary","secondary","success","danger","warning","info","light","dark"],x=r([]),N=x[0],C=x[1],w=r(!1),I=w[0],O=w[1],P=e("ripple","ripple-surface",m&&"ripple-surface-unbound",I&&"ripple-surface-".concat(v),s),R=function(){if(L.find((function(e){return e===(null==v?void 0:v.toLowerCase())})))return O(!0);var e=S(v).join(","),t="rgba({{color}}, 0.2) 0, rgba({{color}}, 0.3) 40%, rgba({{color}}, 0.4) 50%, rgba({{color}}, 0.5) 60%, rgba({{color}}, 0) 70%".split("{{color}}").join("".concat(e));return"radial-gradient(circle, ".concat(t,")")},S=function(e){return"transparent"===e.toLowerCase()?k:"#"===e[0]?function(e){return e.length<7&&(e="#".concat(e[1]).concat(e[1]).concat(e[2]).concat(e[2]).concat(e[3]).concat(e[3])),[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16)]}(e):(-1===e.indexOf("rgb")&&(e=function(e){var t=document.body.appendChild(document.createElement("fictum")),n="rgb(1, 2, 3)";return t.style.color=n,t.style.color!==n?k:(t.style.color=e,t.style.color===n||""===t.style.color?k:(e=getComputedStyle(t).color,document.body.removeChild(t),e))}(e)),0===e.indexOf("rgb")?function(e){return(e=e.match(/[.\d]+/g).map((function(e){return+Number(e)}))).length=3,e}(e):k)},T=function(e){var t,n=null===(t=E.current)||void 0===t?void 0:t.getBoundingClientRect(),r=e.clientX-n.left,a=e.clientY-n.top,o=n.height,l=n.width,c={delay:d&&.5*d,duration:d&&d-.5*d},s=function(e){var t=e.offsetX,n=e.offsetY,r=e.height,a=e.width,o=n<=r/2,i=t<=a/2,l=function(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))},c=n===r/2&&t===a/2,s=!0===o&&!1===i,u=!0===o&&!0===i,f=!1===o&&!0===i,p=!1===o&&!1===i,d={topLeft:l(t,n),topRight:l(a-t,n),bottomLeft:l(t,r-n),bottomRight:l(a-t,r-n)},m=0;return c||p?m=d.topLeft:f?m=d.topRight:u?m=d.bottomRight:s&&(m=d.bottomLeft),2*m}({offsetX:p?o/2:r,offsetY:p?l/2:a,height:o,width:l}),u=b||s/2,f={left:"".concat(p?l/2-u:r-u,"px"),top:"".concat(p?o/2-u:a-u,"px"),height:"".concat(b?2*b:s,"px"),width:"".concat(b?2*b:s,"px"),transitionDelay:"0s, ".concat(c.delay,"ms"),transitionDuration:"".concat(d,"ms, ").concat(c.duration,"ms")};return I?f:i(i({},f),{backgroundImage:"".concat(R())})};return a((function(){var e=setTimeout((function(){N.length>0&&C(N.splice(1,N.length-1))}),d);return function(){clearTimeout(e)}}),[d,N]),t.createElement(u,i({className:P,onClick:function(e){return function(e){var t=T(e),n=N.concat(t);C(n),h&&h(e)}(e)},ref:E},y),g,N.map((function(e,n){return t.createElement(f,{key:n,style:e})})))}));p.defaultProps={rippleTag:"div",rippleDuration:500,rippleRadius:0,rippleColor:"dark"};var d=t.forwardRef((function(n,a){var o,c=n.className,s=n.color,u=n.outline,f=n.children,d=n.rounded,m=n.disabled,b=n.floating,v=n.size,g=n.href,h=n.block,y=n.active,E=n.toggle,k=n.noRipple,L=n.tag,x=l(n,["className","color","outline","children","rounded","disabled","floating","size","href","block","active","toggle","noRipple","tag"]),N=r(y||!1),C=N[0],w=N[1],I=s&&["light","link"].includes(s)||u?"dark":"light";o="none"!==s?u?s?"btn-outline-".concat(s):"btn-outline-primary":s?"btn-".concat(s):"btn-primary":"";var O=e("none"!==s&&"btn",o,d&&"btn-rounded",b&&"btn-floating",v&&"btn-".concat(v),"".concat((g||"button"!==L)&&m?"disabled":""),h&&"btn-block",C&&"active",c);return g&&"a"!==L&&(L="a"),["hr","img","input"].includes(L)||k?t.createElement(L,i({className:O,onClick:E?function(){w(!C)}:void 0,disabled:!(!m||"button"!==L)||void 0,href:g,ref:a},x),f):t.createElement(p,i({rippleTag:L,rippleColor:I,className:O,onClick:E?function(){w(!C)}:void 0,disabled:!(!m||"button"!==L)||void 0,href:g,ref:a},x),f)}));d.defaultProps={tag:"button",role:"button",color:"primary"};var m=function(n){var r,a=n.animate,o=n.className,c=n.icon,s=n.fab,u=n.fas,f=n.fal,p=n.far,d=n.flag,m=n.spin,b=n.fixed,v=n.flip,g=n.list,h=n.size,y=n.pull,E=n.pulse,k=n.color,L=n.border,x=n.rotate,N=n.inverse,C=n.stack,w=n.iconType,I=n.children,O=l(n,["animate","className","icon","fab","fas","fal","far","flag","spin","fixed","flip","list","size","pull","pulse","color","border","rotate","inverse","stack","iconType","children"]);r=d?"flag":s?"fab":u?"fas":p?"far":f?"fal":"fa";var P=e(w?"fa-".concat(w):r,a&&"fa-".concat(a),d?"flag-".concat(d):c&&"fa-".concat(c),h&&"fa-".concat(h),k&&"text-".concat(k),L&&"fa-border",x&&"fa-rotate-".concat(x),y&&"fa-pull-".concat(y),m&&!a&&"fa-spin",g&&"fa-li",b&&"fa-fw",E&&!a&&"fa-pulse",N&&"fa-inverse",v&&"fa-flip-".concat(v),C&&"fa-stack-".concat(C),o);return t.createElement("i",i({className:P},O),I)},b=function(e){var r=e.mobileProgress,a=e.backLabel,o=void 0===a?"BACK":a,i=e.nextLabel,l=void 0===i?"NEXT":i,c=n(s),u=c.activeItem,f=c.setActiveItem,p=c.prevActive,b=c.isAnimating,v=c.stepsLength;return t.createElement("div",{className:"stepper-mobile-footer bg-light"},t.createElement("div",{className:"stepper-back-btn"},t.createElement(d,{color:"link",onClick:function(){b.current&&u!==p.current||(p.current=u,f(1!==u?u-1:u))}},t.createElement(m,{fas:!0,icon:"chevron-left"}),o)),r&&t.createElement("div",{className:"stepper-mobile-progress gray-500"},t.createElement("div",{className:"stepper-mobile-progress-bar bg-primary",style:{width:"".concat(u/v*100,"%")}})),t.createElement("div",{className:"stepper-next-btn"},t.createElement(d,{color:"link",onClick:function(){b.current&&u!==p.current||(p.current=u,f(u!==v?u+1:u))}},l,t.createElement(m,{fas:!0,icon:"chevron-right"}))))},v=function(n){var f=n.className,p=n.children,d=n.defaultStep,m=void 0===d?1:d,v=n.linear,g=n.noEditable,h=n.externalNext,y=n.externalPrev,E=n.style,k=n.type,L=n.onChange,x=n.onInvalid,N=n.onValid,C=n.mobileProgress,w=n.disableHeadSteps,I=n.mobileOfLabel,O=n.mobileStepLabel,P=n.mobileBackLabel,R=n.mobileNextLabel,S=l(n,["className","children","defaultStep","linear","noEditable","externalNext","externalPrev","style","type","onChange","onInvalid","onValid","mobileProgress","disableHeadSteps","mobileOfLabel","mobileStepLabel","mobileBackLabel","mobileNextLabel"]),T=r(m),A=T[0],j=T[1],z=r(void 0),H=z[0],V=z[1],D=r([]),B=D[0],X=D[1],M=r({target:0,after:0}),Y=M[0],q=M[1],U=r(0),K=U[0],F=U[1],G=o(m),J=o(!1),Q="mobile"===k,W=e("stepper","horizontal"===k&&"stepper-horizontal","vertical"===k&&"stepper-vertical",Q&&"stepper-mobile",f),Z=i({height:e("vertical"!==k&&H&&"".concat(H,"px"))},E),$=o(null),_=o(null);return a((function(){var e=function(){j((function(e){if(J.current&&e!==G.current)return e;G.current=e;var t=e!==K?e+1:e;return v?(q({target:e,after:t}),e):t}))},t=null==h?void 0:h.current;if(t)return t.addEventListener("click",e),function(){t.removeEventListener("click",e)}}),[h,G,v,K]),a((function(){var e=function(){j((function(e){if(J.current&&e!==G.current)return e;G.current=e;var t=1!==e?e-1:e;return v?(q({target:e,after:t}),e):t}))},t=null==y?void 0:y.current;if(t)return t.addEventListener("click",e),function(){t.removeEventListener("click",e)}}),[y,G,v]),a((function(){X((function(e){return e.includes(A)?e:c(c([],e),[A])})),null==L||L(A)}),[A,L]),a((function(){J.current=!0,setTimeout((function(){J.current=!1}),500)}),[A]),a((function(){var e=$.current;if(e){var t=e.querySelectorAll("li").length;F(t)}}),[]),t.createElement("ul",i({ref:$,className:W},S,{style:Z}),t.createElement(s.Provider,{value:{activeItem:A,setActiveItem:j,prevActive:G,setHeight:V,completed:B,noEditable:g,isAnimating:J,linear:v,formRef:_,validate:Y,setValidate:q,type:k,stepsLength:K,onValid:N,onInvalid:x,mobileProgress:C,disableHeadSteps:w}},Q&&t.createElement(u,{ofLabel:I,stepLabel:O}),p,Q&&t.createElement(b,{backLabel:P,nextLabel:R,mobileProgress:C})))};v.defaultProps={type:"horizontal"};export{v as default};
