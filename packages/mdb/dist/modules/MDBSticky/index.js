"use strict";var t=require("clsx"),e=require("react");function n(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var o=n(t),r=n(e),c=function(){return c=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},c.apply(this,arguments)};function l(t){var e=function(t){var e=t.getBoundingClientRect();return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}}(t),n=t.getBoundingClientRect(),o=0===e.left&&0===e.top?0:window.innerHeight-n.bottom;return c(c({},e),{bottom:o})}var i=function(t){var n=t.className,i=t.stickyRef,u=t.animationSticky,a=t.animationUnsticky,s=t.boundary,f=t.delay,p=t.direction,d=t.offset,h=t.position,m=t.tag,g=t.children,y=t.onActive,b=t.onInactive,v=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]])}return n}(t,["className","stickyRef","animationSticky","animationUnsticky","boundary","delay","direction","offset","position","tag","children","onActive","onInactive"]),w=e.useRef(null),x=e.useRef(null),R=i||w,k=e.useRef(""),O=e.useRef(!1),E=e.useRef(0),C=e.useRef(0),S=e.useRef(0),j=e.useState(),B=j[0],I=j[1],z=e.useState(),L=z[0],P=z[1],T=e.useState(!1),N=T[0],q=T[1],A=e.useState({}),H=A[0],U=A[1],F=e.useState(!1),Y=F[0],D=F[1],G=o.default("sticky",u&&N&&"animation ".concat(u),a&&Y&&"animation ".concat(a),n),J=e.useCallback((function(){var t=x.current,e=R.current;E.current=t?t.offsetTop:e.offsetTop}),[R]),K=e.useCallback((function(){var t=R.current;t&&(S.current="top"===h?E.current-f:E.current+t.height-document.body.scrollHeight+f)}),[f,h,R]),M=e.useCallback((function(t){t>C.current?k.current="down":k.current="up"}),[]),Q=function(t,e){Object.keys(e).forEach((function(n){t.style[n]=e[n]}))},V=e.useCallback((function(){var t=x.current,e=R.current;if(t){var n=t.getBoundingClientRect().left;U({left:"".concat(n,"px")})}else U({});Q(e,H),J()}),[J,H,R]),W=e.useCallback((function(){var t,e=R.current,n=d,o=e.getBoundingClientRect().height,r=c({height:e.parentElement.getBoundingClientRect().height},l(e.parentElement)),i="boolean"!=typeof s&&(null==s?void 0:s.current);t=i?l(i).top-o-n:r.height+r[h]-o-n;var u,a="top"===h,f="bottom"===h,p=s,m=t<0,g=t>r.height-o;a&&(u=m&&p?{top:"".concat(n+t,"px")}:{top:"".concat(n+0,"px")}),f&&(u=m&&p?{bottom:"".concat(n+t,"px")}:g&&p?{bottom:"".concat(d+r.bottom,"px")}:{bottom:"".concat(n+0,"px")}),Q(e,u)}),[s,d,h,R]),X=e.useCallback((function(){var t=window.pageYOffset||document.documentElement.scrollTop,e=d;J(),K(),M(t);var n=[k.current,"both"].includes(p),o=S.current<=t,r=o&&!O.current&&n,c=(!o||!n)&&O.current;if(r){var l=R.current.getBoundingClientRect(),i=l.height,u=l.left,s=l.width;y&&y(),q(!0),P({height:"".concat(i,"px"),width:"".concat(s,"px"),opacity:"0"}),I({top:"top"===h?"".concat(0+e,"px"):null,bottom:"bottom"===h?"".concat(0+e,"px"):null,height:"".concat(i,"px"),width:"".concat(s,"px"),left:"".concat(u,"px"),zIndex:"100",position:"fixed"}),W(),O.current=!0}c&&(b&&b(),a?(D(!0),setTimeout((function(){I({top:null,bottom:null,position:null,left:null,zIndex:null,width:null,height:null}),q(!1),P({height:null,width:null,opacity:null}),D(!1)}),200)):(I({top:null,bottom:null,position:null,left:null,zIndex:null,width:null,height:null}),q(!1),P({height:null,width:null,opacity:null})),O.current=!1),O.current&&(Q(R.current,H),W()),C.current=t<=0?0:t}),[p,J,K,M,d,h,R,H,W,a,y,b]);return e.useEffect((function(){return window.addEventListener("resize",V),window.addEventListener("scroll",X),function(){window.removeEventListener("resize",V),window.removeEventListener("scroll",X)}}),[V,X]),r.default.createElement(r.default.Fragment,null,N&&r.default.createElement(m,c({className:G,ref:x,style:L},v),g),r.default.createElement(m,c({className:G,ref:R,style:B},v),g))};i.defaultProps={tag:"span",delay:0,direction:"down",offset:0,position:"top"},module.exports=i;
